this.gbjs=this.gbjs||{},function(){"use strict";var t=gbjs.Info=gbjs.Info||{};t.version="",t.buildDate=""}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t){this.Bitmap_constructor(t)}createjs.extend(t,createjs.Bitmap);gbjs.BitmapAvatar=createjs.promote(t,"Bitmap")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Bitmap_constructor(t),this.value=e,this.selected=!1,this.cursor=n,this._hoverShadow,this._shadow,this.cursor&&(this.cursor=n,this.addEventListener("click",this.handleEventClick.bind(this)),this.addEventListener("rollover",this),this.addEventListener("rollout",this))}var e=createjs.extend(t,createjs.Bitmap);e.draw=function(t,e){this.shadow=this._shadow,this.Bitmap_draw(t,e),this.hover&&(this.shadow=this._hoverShadow)},e.getValue=function(){return this.value},e.setHoverShadow=function(t,e,n,s){this._hoverShadow=new createjs.Shadow(t,e,n,s)},e.setShadow=function(t,e,n,s){this._shadow=new createjs.Shadow(t,e,n,s)},e.handleEventClick=function(t){this.draggable||this.select()},e.select=function(){var t=this.y;this.selected===!0?t+=30:t-=30,createjs.Tween.get(this).to({y:t},100),this.selected=!this.selected},e.unSelect=function(){this.selected===!0&&(y=this.y+30,createjs.Tween.get(this).to({y:y},100),this.selected=!1)},e.handleEvent=function(t){this.hover="rollover"==t.type},gbjs.BitmapCard=createjs.promote(t,"Bitmap")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Bitmap);gbjs.BitmapDesk=createjs.promote(t,"Bitmap")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.CardContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.ChairContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.Container=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.DeskContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor(),this.sortable=new gbjs.Sortable(this)}var e=createjs.extend(t,createjs.Container);e.dealCard=function(){},gbjs.HandContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Container_constructor(),this.username=new gbjs.TextUsername(t),this.avatar=new gbjs.BitmapAvatar(e),this.money=new gbjs.TextMoney(n),this.addChild(this.username),this.addChild(this.avatar),this.addChild(this.money)}createjs.extend(t,createjs.Container);gbjs.Player=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t){this.parent=t,this.oldIndex,this.oldOffset,this.dragObj,this.dragIndex,this.newIndex,this.nextIndex,this.nextObj,this.cloneObj,this.space,t.on("mousedown",this._onDragStart,this),t.on("pressmove",this._onTouchMove,this),t.on("pressup",this._onDragOver,this)}t.active=!1,t.prototype._onDragStart=function(t){var e=t.target;if(this.dragObj=e,this.space)return!0;var n=e.parent.getChildAt(0),s=e.parent.getChildAt(1);n&&s&&(this.space=s.x-n.x)},t.prototype._dragStarted=function(e){var n=e.target;n.offset={x:n.x-e.stageX,y:n.y-e.stageY},n.draggable=!0,t.active=this,this.updateDragIndex(),this.cloneObj=n.clone()},t.prototype.updateDragIndex=function(){var t=this.parent.getChildAt(this.parent.numChildren-1);t!=this.dragObj&&this.parent.addChild(this.dragObj)},t.prototype._onTouchMove=function(e){if(this.dragObj){t.active||this._dragStarted(e);var n=e.target,s=this.parent.children,r=e.stageX+n.offset.x,i=e.stageY+n.offset.y;this.updateDragIndex(),n.x=r,n.y=i,0>r&&(r=0);var a=Math.round(r/this.space);a>=s.length&&(a=s.length-1),a!=this.newIndex&&(this.newIndex=a,this._sort())}},t.prototype._sort=function(){for(var t=this.newIndex,e=this.parent.children,n=this.space,s=0;t>s;s++){var r=e[s];createjs.Tween.get(r).to({x:s*n},100)}for(var s=t;s<e.length-1;s++){var r=e[s];createjs.Tween.get(r).to({x:(s+1)*n},100)}},t.prototype.handleEvent=function(t){},t.prototype._onDragOver=function(e){if(t.active){t.active=!1;var n=e.target;n.parent.addChildAt(n,this.newIndex),n.x=this.newIndex*this.space,n.y=this.cloneObj.y,n.draggable=!1}},t.prototype._onDrop=function(t){},t.prototype.destroy=function(){parent.on("pressmove",this._onTouchMove,this),parent.on("pressup",this._onDragOver,this)},gbjs.Sortable=t}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Text_constructor(t,e,n)}createjs.extend(t,createjs.Text);gbjs.TextMoney=createjs.promote(t,"Text")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Text_constructor(t,e,n)}createjs.extend(t,createjs.Text);gbjs.TextUsername=createjs.promote(t,"Text")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(e,n){return this instanceof t?(this.card=n,this.parent=this.card.parent,this.value=this.card.getValue(),this.index=this.parent.getChildIndex(this.card),this.rank=t.getRank(this.value),this.handCards=this.parent.children,void(this.cardsFire=e)):new t(e,n)}t.prototype.getCards=function(){var e,n=this,s=n.cardsFire;return n.value>n._getMinPush()&&2!=s.length&&1!=s.length?[]:(s.sort(function(t,e){return t>e}),1!==s.length?t.getRank(s[0])==t.getRank(s[1])?(e=t.getPhomSpecial(s),e>0?n._getArrSpecialSuit(e):2==s.length&&s[0]>47?n._getChatDoi2():n._getSelectNgang()):this._getDoc():s[0]>=48?n._getCardsChat2():[])},t.prototype._getCardsChat2=function(){var t=this._getTuQuy();return 0==t.length&&(t=this._getDoithong(4)),0==t.length&&(t=this._getDoithong(3)),t},t.prototype._getChatDoi2=function(){var t=this._getTuQuy();return 0==t.length&&(t=this._getDoithong(4)),t},t.prototype._getTuQuyTohon=function(){var e=this.cardsFire[0];return t.getRank(e)>this.rank?[]:this._getTuQuy()},t.prototype._getMinPush=function(){return this.handCards[this.handCards.length-1].getValue()},t.prototype._getSodoithongChon=function(e){return t.getRank(this.cardsFire[0])>this.rank?void 0:this._getDoithong(e)},t.prototype._getTuQuy=function(){var e=this,n=_.filter(e.handCards,function(n){return t.getRank(n.getValue())==e.rank});return n.length<4&&(n=[]),n},t.prototype._getDoithong=function(e){for(var n=[],s=this.rank,r=this.index,i=0;e>i;i++){for(var a=0,o=r+i;o<this.handCards.length&&(t.getRank(this.handCards[o].getValue())!=s||(a++,n.push(this.handCards[o]),2!=a));o++);if(2>a){n=[];break}s++}return n.length/2!=e&&(n=[]),n},t.prototype._getArrSpecialSuit=function(t){var e=[];switch(t){case 3:e=this._getDoithong(t),0==e.length&&(e=this._getTuQuy());break;case 4:e=this._getDoithong(t);break;case 5:e=this._getTuQuyTohon(),0==e.length&&(e=this._getDoithong(3))}return e},t.prototype._getSelectNgang=function(){var e=this,n=[],s=e.cardsFire.length;if(n=e.getCartsByRank(e.rank),n.length<s.length)return[];if(2==s&&t.getRank(e.cardsFire[0])==e.rank){var r=e.cardsFire[1]%4,i=n[0].getValue()%4,a=n[1].getValue()%4;a>i&&(i=a),r>i&&(n=[])}else e.rank>t.getRank(e.cardsFire[0])?(n=n.slice(0,s-1),-1==n.indexOf(e.card)&&n.push(e.card)):n=[];return n},t.prototype.getCartByRank=function(e){return _.find(this.handCards,function(n){return t.getRank(n.getValue())==e})},t.prototype.getCartsByRank=function(e){return _.filter(this.handCards,function(n){return t.getRank(n.getValue())==e})},t.isUndefined=function(t){return"undefined"==typeof t},t.prototype._getDoc=function(){var e=this,n=[],s=e.card,r=e.rank,i=t.getRank(e.cardsFire[0]);if(i>r)return[];n.push(s);for(var a=1;a<this.cardsFire.length;a++){if(r++,s=_.find(e.handCards,function(n){if(t.getRank(n.getValue())==r){if(a!=e.cardsFire.length-1)return!0;if(n.getValue()>e.cardsFire[a])return!0}return!1}),t.isUndefined(s))return[];n.push(s)}return n},t.getRank=function(t){return Math.floor(t/4)},t.getPhomSpecial=function(e){var n,s,r=0;switch(e.length){case 4:n=t.getRank(e[0]),s=t.getRank(e[1]),n==s&&(r=5);break;case 6:n=t.getRank(e[0]),s=t.getRank(e[2]),n==s-1&&(r=3);break;case 8:n=t.getRank(e[0]),s=t.getRank(e[2]),n==s-1&&(r=4)}return r},gbjs.TUPhom=t}(),this.gbjs=this.gbjs||{},function(){"use strict";gbjs.utils=gbjs.utils||{}}();