this.gbjs=this.gbjs||{},function(){"use strict";var t=gbjs.Info=gbjs.Info||{};t.version="",t.buildDate=""}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t){this.Bitmap_constructor(t)}createjs.extend(t,createjs.Bitmap);gbjs.BitmapAvatar=createjs.promote(t,"Bitmap")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Bitmap_constructor(t),this.value=e,this.selected=!1,this.cursor=n,this._hoverShadow,this._shadow,this.cursor&&(this.cursor=n,this.addEventListener("click",this.handleEventClick.bind(this)),this.addEventListener("rollover",this),this.addEventListener("rollout",this))}var e=createjs.extend(t,createjs.Bitmap);e.draw=function(t,e){this.shadow=this._shadow,this.Bitmap_draw(t,e),this.hover&&(this.shadow=this._hoverShadow)},e.getValue=function(){return this.value},e.setHoverShadow=function(t,e,n,s){this._hoverShadow=new createjs.Shadow(t,e,n,s)},e.setShadow=function(t,e,n,s){this._shadow=new createjs.Shadow(t,e,n,s)},e.handleEventClick=function(t){this.draggable||this.select()},e.select=function(){var t=this.y;this.selected===!0?t+=30:t-=30,createjs.Tween.get(this).to({y:t},100),this.selected=!this.selected},e.unSelect=function(){this.selected===!0&&(y=this.y+30,createjs.Tween.get(this).to({y:y},100),this.selected=!1)},e.handleEvent=function(t){this.hover="rollover"==t.type},gbjs.BitmapCard=createjs.promote(t,"Bitmap")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Bitmap);gbjs.BitmapDesk=createjs.promote(t,"Bitmap")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.CardContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.ChairContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.Container=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor()}createjs.extend(t,createjs.Container);gbjs.DeskContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(){this.Container_constructor(),this.sortable=new gbjs.Sortable(this)}var e=createjs.extend(t,createjs.Container);e.dealCard=function(){},gbjs.HandContainer=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Container_constructor(),this.username=new gbjs.TextUsername(t),this.avatar=new gbjs.BitmapAvatar(e),this.money=new gbjs.TextMoney(n),this.addChild(this.username),this.addChild(this.avatar),this.addChild(this.money)}createjs.extend(t,createjs.Container);gbjs.Player=createjs.promote(t,"Container")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t){this.parent=t,this.oldIndex,this.oldOffset,this.dragObj,this.dragIndex,this.newIndex,this.nextIndex,this.nextObj,this.cloneObj,this.space,t.on("pressmove",this._onTouchMove,this),t.on("pressup",this._onDragOver,this)}t.active=!1,t.prototype._onDragStart=function(t){console.log(t)},t.prototype._dragStarted=function(e){var n=e.target;if(n.offset={x:n.x-e.stageX,y:n.y-e.stageY},n.draggable=!0,t.active=this,this.dragObj=n,this.updateDragIndex(),this.cloneObj=n.clone(),this.space)return!0;var s=n.parent.getChildAt(0),i=n.parent.getChildAt(1);s&&i&&(this.space=i.x-s.x)},t.prototype.updateDragIndex=function(){var t=this.parent.getChildAt(this.parent.numChildren-1);t!=this.dragObj&&this.parent.addChild(this.dragObj)},t.prototype._onTouchMove=function(e){t.active||this._dragStarted(e);var n,s=e.target,i=this.parent.children,r="next",a=e.stageX+s.offset.x,o=e.stageY+s.offset.y;this.updateDragIndex(),a<s.x&&(r="prev"),s.x=a,s.y=o,0>a&&(a=0);var h=Math.round(a/this.space);if(h>=i.length&&(h=i.length-1),h!=this.newIndex)if(this.newIndex=h,"next"==r)for(var c=0;c<this.newIndex;c++){var n=i[c];createjs.Tween.get(n).to({x:c*this.space},100)}else for(var c=this.newIndex;c<i.length-1;c++){var n=i[c];createjs.Tween.get(n).to({x:(c+1)*this.space},100)}},t.prototype.handleEvent=function(t){},t.prototype._onDragOver=function(e){if(t.active){t.active=!1;var n=e.target;n.parent.addChildAt(n,this.newIndex),n.x=this.newIndex*this.space,n.y=this.cloneObj.y,n.draggable=!1}},t.prototype._onDrop=function(t){},t.prototype.destroy=function(){parent.on("pressmove",this._onTouchMove,this),parent.on("pressup",this._onDragOver,this)},gbjs.Sortable=t}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Text_constructor(t,e,n)}createjs.extend(t,createjs.Text);gbjs.TextMoney=createjs.promote(t,"Text")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(t,e,n){this.Text_constructor(t,e,n)}createjs.extend(t,createjs.Text);gbjs.TextUsername=createjs.promote(t,"Text")}(),this.gbjs=this.gbjs||{},function(){"use strict";function t(e,n){return this instanceof t?(this.card=n,this.parent=this.card.parent,this.value=this.card.getValue(),this.index=this.parent.getChildIndex(this.card),this.rank=t.getRank(this.value),this.handCards=this.parent.children,void(this.cardsFire=e)):new t(e,n)}t.prototype.getCards=function(){var e,n=this,s=n.cardsFire;if(n.value>n._getMinPush()&&2!=s.length&&1!=s.length)return[];if(s.sort(function(t,e){return t>e}),1===s.length){if(s[0]>=48)return n._getCardsChat2()}else{if(t.getRank(s[0])!=t.getRank(s[1]))return this._getDoc();if(e=t.getPhomSpecial(s),e>0)return n._getArrSpecialSuit(e);if(2==s.length&&s[0]>47)return n._getChatDoi2();if(2==s.length&&this.rank==t.getRank(s[0])){var i=n._getSelectNgang();if(2==i.length){var r=s[1]%4,a=i[0].getValue()%4,o=i[1].getValue()%4;if(o>a&&(a=o),a>r)return i}}else if(n.rank>t.getRank(s[0])){var i=n._getSelectNgang();return i=_.filter(i,function(t){return t.getValue()>=n.value}),i.slice(0,n.cardsFire.length)}}return[]},t.prototype._getCardsChat2=function(){var t=this._getTuQuy();return 0==t.length&&(t=this._getDoithong(4)),0==t.length&&(t=this._getDoithong(3)),t},t.prototype._getChatDoi2=function(){var t=this._getTuQuy();return 0==t.length&&(t=this._getDoithong(4)),t},t.prototype._getTuQuyTohon=function(){var e=this.cardsFire[0];return t.getRank(e)>this.rank?[]:this._getTuQuy()},t.prototype._getMinPush=function(){return this.handCards[this.handCards.length-1].getValue()},t.prototype._getSodoithongChon=function(e){return t.getRank(this.cardsFire[0])>this.rank?void 0:this._getDoithong(e)},t.prototype._getTuQuy=function(){var e=this,n=_.filter(e.handCards,function(n){return t.getRank(n.getValue())==e.rank});return n.length<4&&(n=[]),n.length>0&&n[0].getValue()!=e.value&&(n=[]),n},t.prototype._getDoithong=function(e){for(var n=[],s=this.rank,i=this.index,r=0;e>r;r++){for(var a=0,o=i+r;o<this.handCards.length&&(t.getRank(this.handCards[o].getValue())!=s||(a++,n.push(this.handCards[o]),2!=a));o++);if(2>a){n=[];break}s++}return n.length/2!=e&&(n=[]),n},t.prototype._getArrSpecialSuit=function(t){var e=[];switch(t){case 3:e=this._getDoithong(t),0==e.length&&(e=this._getTuQuy());break;case 4:e=this._getDoithong(t);break;case 5:e=this._getTuQuyTohon(),0==e.length&&(e=this._getDoithong(3))}return e},t.prototype._getSelectNgang=function(){var e=this;return _.filter(this.handCards,function(n){return t.getRank(n.getValue())==e.rank})},t.prototype.getCartByRank=function(e){return _.find(this.handCards,function(n){return t.getRank(n.getValue())==e})},t.isUndefined=function(t){return"undefined"==typeof t},t.prototype._getDoc=function(){var e=this,n=[],s=e.card,i=e.rank,r=t.getRank(e.cardsFire[0]);if(r>i)return[];n.push(s);for(var a=1;a<this.cardsFire.length;a++){if(i++,s=_.find(e.handCards,function(n){if(t.getRank(n.getValue())==i){if(a!=e.cardsFire.length-1)return!0;if(n.getValue()>e.cardsFire[a])return!0}return!1}),t.isUndefined(s))return[];n.push(s)}return n},t.getRank=function(t){return Math.floor(t/4)},t.getPhomSpecial=function(e){var n,s,i=0;switch(e.length){case 4:n=t.getRank(e[0]),s=t.getRank(e[1]),n==s&&(i=5);break;case 6:n=t.getRank(e[0]),s=t.getRank(e[2]),n==s-1&&(i=3);break;case 8:n=t.getRank(e[0]),s=t.getRank(e[2]),n==s-1&&(i=4)}return i},gbjs.TUPhom=t}(),this.gbjs=this.gbjs||{},function(){"use strict";gbjs.utils=gbjs.utils||{}}();